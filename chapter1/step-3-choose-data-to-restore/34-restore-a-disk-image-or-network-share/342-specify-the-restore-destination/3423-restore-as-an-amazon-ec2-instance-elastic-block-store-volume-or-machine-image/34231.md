## 3.4.2.3.1 - Restore to Amazon EC2 Instance

This option enables you to restore your disk image to an [Amazon EC2 instance](https://aws.amazon.com/ec2/instance-types/) of your choice.

> This feature is supported for the following operation systems:
>
> * Windows Server 2008
> * Windows Server 2012
> * Windows Server 2016

With this option selected, switching to the next wizard page enables you to specify the settings of a target EC2 instance.

![](/assets/image-based-to-ec2-instance-details.png)

First, you need to select an existing, or specify a new _"S3"_ or _"S3 China"_ instance account.

See the following article to learn how to add a new S3 account to CloudBerry Backup: [Signing up for Amazon S3](https://help.cloudberrylab.com/cloudberry-backup/signing-up-for-the-cloud/amazon-aws/signing-up-for-amazon-s3).

> Please make sure that the specified account has [all required permissions](/concepts/permissions.md).

After selecting an account, specify the main settings of a target instance:

* **Region**

  Amazon EC2 is hosted in multiple locations world-wide that are composed of separate geographic areas _\(regions\)_. Amazon EC2 provides you with the ability to place resources, such as instances, and data in multiple locations. Resources are not replicated across regions unless you do so specifically.

> Note that there is a charge for data transfer between regions. For this reason, please make sure that you restore your data to the same region where the original backup is stored, unless you are required to transfer your data to another region.
>
> See [Regions and Availability Zones](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html) for more information.

When restoring a disk to an existing virtual machine, the disk must belong to the same Availability Zone as the target machine.

Please be informed that not all instance types may be available in different regions. Occasionally, some instance types may become temporarily unavailable in certain Availability Zones due to service maintenance performed by AWS, in which case you need to switch to a different Availability Zone.

* **Instance type**

  Amazon EC2 provides a wide selection of instance types optimized to fit different use cases, such as computing, memory use, accelerated computing and optimized storage.

  > We strongly recommend that you consult the official AWS documentation to learn about the specifics of each instance type before selecting it as a target type for your restore routine.  
  >   
  > See [Amazon EC2 Instance Types](https://www.gitbook.com/book/yuriyshutov/restore-wizard-draft/edit#) for more information.

* **Subnet**

  A virtual private cloud \(VPC\) is a virtual network dedicated to your AWS account. It is logically isolated from other virtual networks in the AWS Cloud. You can launch your AWS resources, such as Amazon EC2 instances, into your VPC.

  > A VPC spans all the Availability Zones in the region. After creating a VPC, you can add one or more subnets in each Availability Zone.
  >
  > See [VPCs and Subnets](https://www.gitbook.com/book/yuriyshutov/restore-wizard-draft/edit#) for more information[.](https://www.gitbook.com/book/yuriyshutov/restore-wizard-draft/edit#)

* **Security group**

  AWS enables you to increase security in your VPC by using the following features:

  **Security groups **act as a firewall for associated Amazon EC2 instances, controlling both inbound and outbound traffic at the instance level.

  **\[\(when temp.instance\) make sure that the subnet where the temp instance the security group will not close the internet access. By default it works.\]**

* **\[default - Andrey Kharchenko\]        
  **Visit the following webpage to learn how you can customize security groups using AWS Console: [Creating IAM Groups](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_groups_create.html).

  > See [Security](https://www.gitbook.com/book/yuriyshutov/restore-wizard-draft/edit#) to learn more about this feature[.](https://www.gitbook.com/book/yuriyshutov/restore-wizard-draft/edit#)
  >
  > The wizard indicates whether [VM import](https://aws.amazon.com/ec2/vm-import/) user roles are configured property. See [Configuring a VMimport Role](https://help.cloudberrylab.com/cloudberry-backup/signing-up-for-the-cloud/amazon-aws/configuring-a-vmimport-role) for more information.

  \*\*\[When configured improperly \(VHD -&gt; S3; amazon import service makes a vbs from it. This service must need appropriate access. See a manual  
  MBS - auto; Standalone - make manually:

* a user creates manually vmiport

* give rights to the restore account iam rights \(checks and creates\)

* no manual & no iam -&gt; error\*\*

The wizard would propose to create it

* 
* **EBS volume type**

  Amazon EBS \(Elastic Block Store\) provides the following volume types, which differ in their performance characteristics and price, so that you can tailor your storage performance and costs to the requirements of your applications. CloudBerry Backup supports the following volume types:

  * **General Purpose SSD \(gp2\)                                                                            
    **A general purpose SSD volume that balances price and performance for a wide variety of workloads.

  * **Provisioned IOPS SSD \(io1\)                                                                            
    **The highest-performance SSD volume for mission-critical low-latency or high-throughput workloads.

  * **Magnetic \(standard, a previous-generation type\)                                                                            
    **A previous generation HDD. If you need higher performance or performance consistency than previous-generation volumes can provide, we recommend that you consider using _General Purpose SSD \(gp2\)_ or other current volume types.

> See [Amazon EBS Volume Types](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSVolumeTypes.html) to learn more.



